<!doctype html>
<html>
<head>
	<title>Pengti</title>





	<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.87.0/phaser.min.js"></script>

	<script>
let win_w=800, win_h=450;

let config = {
    type: Phaser.AUTO,
    width: win_w,
    height: win_h,
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

let game = new Phaser.Game(config);


let player1, player2;
let player1_x=32, player1_y=225;
let player2_x=768, player2_y=225;

let players_w=16, players_h=96;


let ball;
let ball_x=400, ball_y=225;
let ball_w=16, ball_h=16;

let ball_x_dir=1,ball_y_dir=1;

let scorePlayer1 = 0;
let scorePlayer2 = 0;
let palaPlayer1;

function preload ()
{
}

function create ()
{
	player1 = this.add.rectangle(player1_x, player1_y, players_w, players_h, 0xffffff);
	player2 = this.add.rectangle(player2_x, player2_y, players_w, players_h, 0xffffff);
	ball = this.add.rectangle(ball_x, ball_y, ball_w, ball_h, 0xffff00);
	palaPlayer1= this.input.keyboard.createCursorKeys();

	this.scoreTextPlayer1 = this.add.text(100, 20, `Player 1: ${scorePlayer1}`, { fontSize: '20px', fill: '#fff' });
    	this.scoreTextPlayer2 = this.add.text(600, 20, `Player 2: ${scorePlayer2}`, { fontSize: '20px', fill: '#fff' });
}

function update ()
{
	ball.x += ball_x_dir;
    ball.y += ball_y_dir;

    // Ball collision with top and bottom
    if (ball.y > win_h || ball.y < 0) {
        ball_y_dir = -ball_y_dir;
    }

    // Ball collision with left and right sides
    if (ball.x > win_w) {
        scorePlayer1++;
        resetBall();
        updateScores();
    } else if (ball.x < 0) {
        scorePlayer2++;
        resetBall();
        updateScores();
    }

    // Moviment Player 1
    if (palaPlayer1.up.isDown && player1.y - players_h / 2 > 0) {
        player1.y -= 5;
    } else if (palaPlayer1.down.isDown && player1.y + players_h / 2 < win_h) {
        player1.y += 5;
    }
	
}
function resetBall() {
    ball.x = ball_x;
    ball.y = ball_y;
    ball_x_dir = (Math.random() < 0.5 ? -1 : 1) * 2;
    ball_y_dir = (Math.random() < 0.5 ? -1 : 1) * 2;
}
function updateScores() {
	game.scene.scenes[0].scoreTextPlayer1.setText(`Player 1: ${scorePlayer1}`);
   	game.scene.scenes[0].scoreTextPlayer2.setText(`Player 2: ${scorePlayer2}`);
}

	</script>
</head>
<body>
</body>
</html>
